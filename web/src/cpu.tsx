import init, { Cpu, setup_logging } from 'cbt_emulator';
export let cpu: Cpu;

export function reset_cpu() : void {
    cpu = Cpu.new();
}

init().then(() => {
    setup_logging();

    cpu = Cpu.new();

    cpu.load_program(hello_world);
    console.log("rom: ", cpu.view_rom());
});

export const hello_world = new Uint8Array([
    0x3e, 0x01, 0x3e, 0x0f, 0x3e, 0x38, 0x39, 0x00, 0x16, 0x07, 0x00, 0x59, 0xf5, 0xf3,
    0x2b, 0x00, 0x15, 0x33, 0x2f, 0x00, 0x0b, 0x36, 0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x2c,
    0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64, 0x21, 0x00,
]);
